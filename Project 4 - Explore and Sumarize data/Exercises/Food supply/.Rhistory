gather(sex, contains("sex"), na.rm = FALSE, convert = FALSE)
df_fin %>%
gather(sex, na.rm = FALSE, convert = FALSE)
df_fin %>%
gather(country, year, sex, na.rm = FALSE, convert = FALSE)
df_fin %>%
gather(country, year, sex.x, na.rm = FALSE, convert = FALSE)
df_fin <- left_join(df1, df2, by = c("country", "year"))
df_fin
df_fin <- left_join(df1, df2, by = c("country", "year", "ITC", "sex"))
df_fin
df_fin <- merge(df1, df2, by)
df_fin
df_fin <- merge(df1, df2)
df_fin
df_fin <- merge(df1, df2, by ="country", "year")
df_fin
df_fin <- merge(df1, df2, by ="country", "year", "ITC", "sex")
df_fin
df_fin <- merge(df1, df2, by ="country", "year", "ITC", "sex")
df_fin <- merge(df1, df2, by ="country", "year", all = FALSE)
df_fin
df_fin <- merge(df1, df2, by ="country")
df_fin <- merge(df1, df2, by ="country")
df_fin
df_fin <- merge(df1, df2, by ="country", "year"")
df_fin
df_fin <- merge(df1, df2, by ="country", "year")
df_fin
df_fin <- merge(df1, df2, by ="country", "year")
df_fin
df_fin <- merge(df1, df2, by ="country")
df_fin <- merge(df1, df2, by ="country")
df_fin
df_fin <- merge(df1, df2, by ="country", "sex")
df_fin
df_fin <- merge(df1, df2, by = "sex")
df_fin
df_fin <- merge(df1, df2, by = "ITC")
df_fin
df_fin <- merge(df1, df2, by = "country","ITC")
df_fin
df_fin <- left_join(df1, df2, id=c("country","year"))
df_fin
df_fin <- left_join(df1, df2, id=c("country"))
df_fin
df_fin <- left_join(df1, df2, by=c("country"))
df_fin
df_fin <- left_join(df1, df2, by=c("country", "year"))
df_fin
colnames(ITC_female)[1] <- "country"
colnames(ITC_male)[1] <- "country"
colnames(ITC_female)[3] <- "ITC_F"
colnames(ITC_male)[3] <- "ITC_M"
dim(ITC_female)
dim(ITC_male)
ITC_female
ITC_male <- read_excel("ITC_male.xlsx", sheet = "Data")
ITC_female <- read_excel("ITC_female.xlsx", sheet = "Data")
ITC_male <- tbl_df(ITC_male)
ITC_female <- tbl_df(ITC_female)
ITC_female
colnames(ITC_female)[1] <- "country"
colnames(ITC_male)[1] <- "country"
dim(ITC_female)
dim(ITC_male)
ITC_female
df1 <- ITC_female %>%
gather("year", "ITC", 2:30, convert = TRUE) %>%
arrange(country,year, ITC)
df1
df2 <- ITC_male %>%
gather("year", "ITC", 2:30, convert = TRUE) %>%
arrange(country,year, ITC)
df1
df1 <- ITC_female %>%
gather("year", "ITC", 2:30, convert = TRUE) %>%
arrange(country,year, ITC)
df1
df1 <- ITC_female %>%
gather("year", "ITC", 2:30, convert = TRUE) %>%
colnames(ITC_female)[3] <- "ITC_F" %>%
arrange(country,year, ITC)
df1 <- ITC_female %>%
gather("year", "ITC", 2:30, convert = TRUE) %>%
colnames(ITC_female)[3] <- "ITC_F" %>%
arrange_(country,year, ITC)
df1 <- ITC_female %>%
gather("year", "ITC", 2:30, convert = TRUE) %>%
colnames(ITC_female)[3] <- "ITC_F" %>%
arrange_(country,year, ITC_F)
df1 <- ITC_female %>%
gather("year", "ITC", 2:30, convert = TRUE) %>%
colnames(ITC_female)[3] <- "ITC_F" %>%
arrange_(country,year, ITC_F)
df1 <- ITC_female %>%
gather("year", "ITC", 2:30, convert = TRUE) %>%
colnames(ITC_female)[3] <- "ITC_F" %>%
arrange(country,year, ITC_F)
library("tidyr")
library("dplyr")
require("XLConnectJars")
require("XLConnectJars")
require("XLConnect")
library(ggplot2)
require("XLConnect")
library(ggplot2)
library(reshape2)
library(datasets)
library(reshape2)
library(datasets)
library(dplyr)
library(dplyr)
library(readxl)
library(reshape2)
library(datasets)
library(dplyr)
library(readxl)
library(countrycode)
library(gridExtra)
library(scales)
df1 <- ITC_female %>%
gather("year", "ITC", 2:30, convert = TRUE) %>%
colnames(ITC_female)[3] <- "ITC_F" %>%
arrange(country,year, ITC_F)
df1 <- ITC_female %>%
gather("year", "ITC", 2:30, convert = TRUE) %>%
arrange(country,year, ITC_F)
df1 <- ITC_female %>%
gather("year", "ITC", 2:30, convert = TRUE) %>%
arrange(country,year, ITC)
df1 <- ITC_female %>%
gather("year", "ITC", 2:30, convert = TRUE) %>%
arrange(country,year, ITC) %>%
colnames(ITC_female)[3] <- "ITC_F"
df1
df1 <- ITC_female %>%
gather("year", "ITC", 2:30, convert = TRUE) %>%
arrange(country,year, ITC) %>%
df2 <- ITC_male %>%
gather("year", "ITC", 2:30, convert = TRUE) %>%
arrange(country,year, ITC)
df1 <- ITC_female %>%
gather("year", "ITC", 2:30, convert = TRUE) %>%
arrange(country,year, ITC) %>%
df2 <- ITC_male %>%
gather("year", "ITC", 2:30, convert = TRUE) %>%
arrange(country,year, ITC)
df1 <- ITC_female %>%
gather("year", "ITC", 2:30, convert = TRUE) %>%
arrange(country,year, ITC) %>%
df2 <- ITC_male %>%
gather("year", "ITC", 2:30, convert = TRUE) %>%
arrange(country,year, ITC)
library("tidyr")
library("dplyr")
df1 <- ITC_female %>%
gather("year", "ITC", 2:30, convert = TRUE) %>%
arrange(country,year, ITC) %>%
df2 <- ITC_male %>%
gather("year", "ITC", 2:30, convert = TRUE) %>%
arrange(country,year, ITC)
df1 <- ITC_female %>%
gather("year", "ITC", 2:30, convert = TRUE) %>%
arrange(country,year, ITC_F)
df1 <- ITC_female %>%
gather("year", "ITC", 2:30, convert = TRUE) %>%
arrange(country,year, ITC)
df2 <- ITC_male %>%
gather("year", "ITC", 2:30, convert = TRUE) %>%
arrange(country,year, ITC)
colnames(ITC_female)[3] <- "ITC_F"
colnames(ITC_male)[3] <- "ITC_M"
df1
ITC_male <- read_excel("ITC_male.xlsx", sheet = "Data")
ITC_female <- read_excel("ITC_female.xlsx", sheet = "Data")
ITC_male <- tbl_df(ITC_male)
ITC_female <- tbl_df(ITC_female)
colnames(ITC_female)[1] <- "country"
colnames(ITC_male)[1] <- "country"
df1 <- ITC_female %>%
gather("year", "ITC", 2:30, convert = TRUE) %>%
arrange(country,year, ITC)
df2 <- ITC_male %>%
gather("year", "ITC", 2:30, convert = TRUE) %>%
arrange(country,year, ITC)
colnames(df1)[3] <- "ITC_F"
colnames(df2)[3] <- "ITC_M"
df1
remove(df_final)
df <- left_join(df1, df2, by=c("country", "year"))
df_fin
remove(df_fin)
df
df$continent <- countrycode(df2$country, "country.name", "continent")
df
qplot(x=year, y = ITC_F, data = df)
qplot(x=year, y = ITC_F, data = df$continent)
qplot(x=year, y = ITC_F, data = df)+
facet_wrap(~continent)
summary(df)
IFC <- read_excel("food_consumption.xlsx", sheet = "Data")
dim(IFC)
IFC
colnames(IFC)[1] <- "country"
df3 <- IFC %>%
gather("year", "IFC", 2:48, convert = TRUE) %>%
arrange(country,year, IFC)
IFC
df3
df3 <- IFC %>%
gather("year", "IFC", 2:48, convert = TRUE) %>%
filter(!is.na(IFC))  %>%
arrange(country,year, IFC)
df3
df1 <- ITC_female %>%
gather("year", "ITC", 2:30, convert = TRUE) %>%
filter(!is.na(ITC)) %>%
arrange(country,year, ITC)
df2 <- ITC_male %>%
gather("year", "ITC", 2:30, convert = TRUE) %>%
filter(!is.na(ITC)) %>%
arrange(country,year, ITC)
df3 <- IFC %>%
gather("year", "IFC", 2:48, convert = TRUE) %>%
filter(!is.na(IFC))  %>%
arrange(country,year, IFC)
df3
df <- left_join(df1, df2, df3, by=c("country", "year"))
df
df <- left_join(df1, df2, by=c("country", "year"))
df
df <- left_join(df, df3, by=c("country", "year")
df <- left_join(df, df3, by=c("country", "year"))
df
df <- left_join(df, df3, by=c("country"))
df
df <- left_join(df, df3, by=c("country", "year))
df
df
df <- left_join(df1, df2, by=c("country", "year"))
df <- left_join(df, df3, by=c("country", "year))
df
head(df)
df <- left_join(df, df3, by=c("country", "year""))
df <- left_join(df, df3, by=c("country", "year"))
df
df <- left_join(df1, df2, by=c("country", "year"))
df
df$continent <- countrycode(df2$country, "country.name", "continent")
df3 <- countrycode(df2$country, "country.name", "continent")
df3
df3
df3$continent <- countrycode(df2$country, "country.name", "continent")
df3
df3 <- IFC %>%
gather("year", "IFC", 2:48, convert = TRUE) %>%
filter(!is.na(IFC))  %>%
arrange(country,year, IFC)
df3
df3$continent <- countrycode(df2$country, "country.name", "continent")
df3
df3$continent <- countrycode(df3$country, "country.name", "continent")
df3
mean(df3$continent== "Europe")
mean(df3$continent== "Europe")
df3 <- IFC %>%
gather("year", "IFC", 2:48, convert = TRUE) %>%
filter(!is.na(IFC))  %>%
arrange(country,year, IFC)
df3
summary(df3)
summary(df3$country)
summary(df$IFC, df3$country)
summary(df, country$IFC)
glimpse(df1)
df1
IFC <- tbl_df(IFC)
unique(df3$country)
unique(df3$year)
unique(df1$year)
df_f <- left_join(df,df3, by=c("year", "country"))
df_f
df_f <- left_join(df,df3, by=c("year", "country"))
df_f
df_f <- left_join(df,df3, by=c("year", "country")) %>%
filter(!is.na(IFC)) %>%
arrange("country", "year")
df_f <- left_join(df,df3, by=c("year", "country")) %>%
filter(!is.na(IFC)) %>%
arrange("year")
df_f
df_f <- left_join(df,df3, by=c("year", "country")) %>%
filter(!is.na(IFC)) %>%
df_f
df_f <- left_join(df,df3, by=c("year", "country")) %>%
filter(!is.na(IFC))
df_f
remove(df_f)
df_final <- left_join(df,df3, by=c("year", "country")) %>%
filter(!is.na(IFC))
df_final
unique(df_final$country, df_final$year)
n(unique(df_final$country, df_final$year)_
n(unique(df_final$country))
sum(unique(df_final$country))
sum(unique(df_final$country))
sum(unique.array(df_final$country))
sum(unique.array(df_final$country), na.rm = FALSE)
sum(unique.array(df_final$country), na.rm = FALSE)
df_final
unique(df_final$year)
unique(df_final$continent)
data1980 = subset(df_final, year==1980)
summary(data1980)
unique(df1$year)
colnames(df1)[3] <- "ITC_F"
colnames(df2)[3] <- "ITC_M"
df <- left_join(df1, df2, by=c("country", "year"))
df_final <- left_join(df,df3, by=c("year", "country")) %>%
filter(!is.na(IFC))
df_final
df_final = df_final[c("country", "continent", "year", "IFC", "ITC_F", "ITC_M" )]
unique(df_final$year)
df_final$continent <- countrycode(df2$country, "country.name", "continent")
df_final
df_final$continent <- countrycode(df_final$country, "country.name", "continent")
df_final
unique(df_final$continent)
df_final = df_final[c("country", "continent", "year", "IFC", "ITC_F", "ITC_M" )]
df_final
data1980 = subset(df_final$continent, year==1980) %>%
summary(data1980)
data1980 = subset(df_final$continent, year==1980) %>%
summary(data1980)
data1980 = subset(df_final, df_final$continent, year==1980)
summary(data1980)
?subset
data1980 = subset(df_final, continent, year==1980)
summary(data1980)
data1980 = subset(df_final, df_final$continent& year==1980)
summary(data1980)
data1980 = subset(df_final, df_final$continent&year==1980)
data1980 = subset(df_final, df_final$continent & year==1980)
data1980 = subset(df_final, df_final$continent & year=="1980"")
data1980 = subset(df_final, df_final$continent & year=="1980")
data1980 = subset(df_final, year==1980)
summary(data1980)
data1980 = subset(df_final, (df_final$continent)&(year==1980))
summary(data1980)
data1980 = subset(df_final, ($continent)&(year==1980))
data1980 = subset(df_final, (continent)&(year==1980))
summary(data1980)
data1980 = subset(df_final, (continent == c("Europe"))&(year==1980))
summary(data1980)
data1980 = subset(df_final, (continent == c("Europe", "Asia"))&(year==1980))
summary(data1980)
summary(data1980$continent)
summarise(data1980, data1980$continent)
data1980 = subset(df_final, year==1980)
summarise(data1980, data1980$continent)
summarise_at(data1980$continent)
summarise_all(data1980)
summarise(data1980)
summarise(data1980()
data1980 = subset(df_final, year==1980)
summarise(data1980)
data1980 = subset(df_final, year==1980)
summarise(data1980)
data1980 = subset(df_final, year==1980)
summarise(data1980)
df_final
data1980 = subset(df_final, year==1980)
summarise(data1980)
summarise(data1980 )
data1980 <- subset(df_final, year==1980)
data1980
data1980
summarise(data1980)
summarise(data1980)
summary(data1980)
data1980 %>%
group_by(year==1980) %>%
summarise_all()
data1980 %>%
group_by(year==1980) %>%
summarise_each(IFC, ITC_F, ITC_M, by = continent)
data1980 %>%
group_by(year==1980) %>%
summarise_each(funs(mean), IFC, ITC_F, ITC_M, by = continent)
data1980 %>%
group_by(year==1980) %>%
summarise_each(funs(mean), IFC, ITC_F, ITC_M, by = c(continent))
data1980 <- df_final %>%
group_by(year==1980) %>%
aggregate(by = country)
data1980 <- df_final %>%
group_by(year==1980) %>%
aggregate(by = country, FUN=mean, na.rm=TRUE)
data1980 <- df_final %>%
group_by(year==1980) %>%
aggregate(df_final ,by = country, FUN=mean, na.rm=TRUE)
data1980 <- df_final %>%
group_by(year==1980) %>%
group_by(continent)
summary(data1980)
data1980 <- df_final %>%
group_by(year==1980, continent) %>%
group_by(continent)
data1980 <- df_final %>%
group_by(year==1980, continent) %>%
summary(data1980)
data1980 <- df_final %>%
group_by(year==1980, continent) %>%
summary(data1980)
data1980 <- df_final %>%
group_by(year==1980, continent)
summary(data1980)
data1980 <- df_final %>%
group_by(year==1980)
summary(data1980)
unique(df_final$year)
data2007 <- df_final %>%
group_by(year==2007)
summary(data2007)
data2007 <- df_final %>%
group_by(year==2007)
summary(data2007)
data1980 <- df_final %>%
group_by(year==1980) %>%
group_by(continent) %>%
summarise(mean = mean(value))
data1980 <- df_final %>%
group_by(year==1980) %>%
group_by(continent) %>%
summarise(mean = mean(IFC))
summary(data1980)
data1980 <- df_final %>%
group_by(year==1980) %>%
group_by(df_final$continent) %>%
summarise(mean = mean(IFC))
data1980 <- df_final %>%
group_by(year==1980) %>%
group_by(df_final$continent)
summary(data1980)
data2007 = subset(df_final, year == 2007)
summary(data2007)
summary(data2007)
ggplot(data = df_final, aes(x = year, y=IFC))+
geom_boxplot()+
ggplot(data = df_final, aes(x = year, y=IFC))+
geom_boxplot()
ggplot(data = df_final, aes(x = year, y = IFC)) +
geom_boxplot()
ggplot(data = df_final, aes(x = year, y = IFC)) +
geom_boxplot()+
facet_wrap(~year)
ggplot(data = df_final, aes(x = year, y = IFC)) +
geom_boxplot()+
facet_wrap(~continent)
ggplot(data = df_final, aes(x = year, y = IFC)) +
geom_boxplot()+
ylab("Food consumption indicator (kilocalories/person&day)")
ggplot(data = df_final, aes(x = year, y = IFC)) +
geom_boxplot()+
ylab("Food consumption indicator (kilocalories/person&day)")+
facet_wrap(~continent)
ggplot(data = df_final, aes(x = year, y = IFC)) +
geom_boxplot()+
ylab("Food consumption indicator (kcal/day)")+
facet_wrap(~continent)
ggplot(data = df_final, aes(x = year, y = IFC)) +
geom_boxplot()+
ylab("Food consumption indicator (kcal/day)")+
facet_wrap(~continent)
ggplot(data = df_final, aes(x = year, y = IFC)) +
geom_boxplot()+
ylab("Food consumption indicator (kcal/day)")+
facet_wrap(~continent)
ggplot(data = df_final, aes(x = continent, y = IFC)) +
geom_boxplot()+
ylab("Food consumption indicator (kcal/day)")+
facet_wrap(~continent)
ggplot(data = df_final, aes(x = country, y = IFC)) +
geom_boxplot()+
ylab("Food consumption indicator (kcal/day)")+
facet_wrap(~continent)
ggplot(data = df_final, aes(x = continent, y = IFC)) +
geom_boxplot()+
ylab("Food consumption indicator (kcal/day)")+
facet_wrap(~continent)
ggplot(data = df_final, aes(x = continent, y = IFC)) +
geom_boxplot()+
ylab("Food consumption indicator (kcal/day)")+
ggplot(data = df_final, aes(x = continent, y = IFC)) +
geom_boxplot()+
ylab("Food consumption indicator (kcal/day)")
ggplot(data = df_final, aes(x = continent, y = IFC)) +
geom_boxplot(aes(fill=continent) +
ylab("Food consumption indicator (kcal/day)")+
ggplot(data = data2007, aes(x = continent, y = IFC)) +
geom_boxplot(aes(fill=continent) +
ylab("Food consumption indicator (kcal/day)")+
ggplot(data = data2007, aes(x = continent, y = IFC)) +
geom_boxplot() +
ylab("Food consumption indicator (kcal/day)")+
ggplot(data = data2007, aes(x = continent, y = IFC)) +
geom_boxplot() +
ylab("Food consumption indicator (kcal/day)") +
ggplot(data = data2007, aes(x = continent, y = IFC)) +
geom_boxplot() +
ylab("Food consumption indicator (kcal/day)")
